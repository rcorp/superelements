<link rel="import" href="./bower_components/polymer/polymer.html" />
<script src="./bower_components/codemirror/lib/codemirror.js"> </script>

<dom-module id="super-code">
	<template>
		<textarea id="textarea">
			<content> </content>
		</textarea>
	</template>
</dom-module>


<script>
	var _mixin = function(dest, source, copyFunc) {
		// summary:
		//		Copies/adds all properties of source to dest; returns dest.
		// dest: Object
		//		The object to which to copy/add all properties contained in source.
		// source: Object
		//		The object from which to draw all properties to copy into dest.
		// copyFunc: Function?
		//		The process used to copy/add a property in source; defaults to the Javascript assignment operator.
		// returns:
		//		dest, as modified
		// description:
		//		All properties, including functions (sometimes termed "methods"), excluding any non-standard extensions
		//		found in Object.prototype, are copied/added to dest. Copying/adding each particular property is
		//		delegated to copyFunc (if any); copyFunc defaults to the Javascript assignment operator if not provided.
		//		Notice that by default, _mixin executes a so-called "shallow copy" and aggregate types are copied/added by reference.
		var name, s, i, empty = {};
		for (name in source) {
			// the (!(name in empty) || empty[name] !== s) condition avoids copying properties in "source"
			// inherited from Object.prototype.	 For example, if dest has a custom toString() method,
			// don't overwrite it with the toString() method that source inherited from Object.prototype
			s = source[name];
			if (!(name in dest) || (dest[name] !== s && (!(name in empty) || empty[name] !== s))) {
				dest[name] = copyFunc ? copyFunc(s) : s;
			}
		}
		return dest; // Object
	}
	Polymer({
		is: "super-code",
		created: function() {

		},
		attached: function() {
			console.log ('this', this, 'this.$', this.$);
			var editor = CodeMirror.fromTextArea(this.$.textarea, {
				lineNumbers: true
			});
			_mixin(this, editor)

		},
		properties: {

		},
		// _valueChanged: function(newValue, oldValue) {
		// 	if (this.dgrid && this.dgrid.refresh)
		// 		this.dgrid.refresh();
		//
		// 	if (this.dgrid && this.dgrid.renderArray)
		// 		this.dgrid.renderArray(newValue);
		// }

	});
</script>
